<!--
    PC-BASIC documentation
    Copyright (c) 2014-2020 Rob Hagemans
    This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.
    http://creativecommons.org/licenses/by-sa/4.0/legalcode
-->

<article>
    <h2 id="technical">Technical reference</h2>

    <section>
        <h3 id="tokenised-file-format">Tokenised file format</h3>
        <p>
            A tokenised program file on a disk device has the following format.
        </p>
        <dl>
            <dt>
                Magic byte
            </dt>
            <dd>
                <code>FF</code>
            </dd>
            <dt>
                Program lines
            </dt>
            <dd>
                Each line is stored as follows:
                <div class="scrollable">
                    <table>
                        <tr>
                            <th>
                                Bytes
                            </th>
                            <th>
                                Format
                            </th>
                            <th>
                                Meaning
                            </th>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td>
                                Unsigned 16-bit little-endian integer.
                            </td>
                            <td>
                                Memory location of the line following the current one. This is used internally by
                                GW-BASIC but ignored when a program is loaded.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td>
                                Unsigned 16-bit little-endian integer.
                            </td>
                            <td>
                                The line number.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Variable
                            </td>
                            <td>
                                Tokenised BASIC, see below.
                            </td>
                            <td>
                                The contents of the line.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                1
                            </td>
                            <td>
                                <code>00</code> (<code><i>NUL</i></code> byte)
                            </td>
                            <td>
                                End of line marker.
                            </td>
                        </tr>
                    </table>
                </div>
            </dd>
            <dt>
                End of file marker
            </dt>
            <dd>
                An <code>1A</code> is written to mark the end of file. This is optional;
                the file will be read without problems if it is omitted.
             </dd>
        </dl>
        <h4 id="tokens">Tokenised BASIC</h4>
        <p>
            The printable ASCII characters in the range <code>20</code>&mdash;<code>7E</code>
            are used for string literals, comments, variable names,
            and elements of statement syntax that are not reserved words.
            Reserved words are represented by their <a href="#reserved-words">reserved word tokens</a> and
            numeric literals are represented by numeric token sequences.
        </p>
        <h5>Numeric token sequences</h5>
        <p>
            Numeric literals are stored in tokenised programs
            according to the following representation. All numbers are positive; negative numbers are stored
            simply by preceding the number with <code>EA</code>, the token for <code>-</code>.
        </p>
        <div class="scrollable">
            <table>
                <tr>
                    <th style="width:10em">
                        Class
                    </th>
                    <th>
                        Bytes
                    </th>
                    <th>
                        Format
                    </th>
                </tr>
                <tr>
                    <td>
                        Indirect line numbers
                    </td>
                    <td>
                        3
                    </td>
                    <td>
                        <code>0E</code> followed by an unsigned 16-bit little-endian integer.
                    </td>
                </tr>
                <tr>
                    <td>
                        Octal integers
                    </td>
                    <td>
                        3
                    </td>
                    <td>
                        <code>0B</code> followed by an unsigned 16-bit little-endian integer.
                    </td>
                </tr>
                <tr>
                    <td>
                        Hexadecimal integers
                    </td>
                    <td>
                        3
                    </td>
                    <td>
                        <code>0C</code> followed by an unsigned 16-bit little-endian integer.
                    </td>
                </tr>
                <tr>
                    <td>
                        Positive decimal integers less than 11
                    </td>
                    <td>
                        1
                    </td>
                    <td>
                        Tokens <code>11</code>&mdash;<code>1B</code> represent 0&mdash;10.
                    </td>
                </tr>
                <tr>
                    <td>
                        Positive decimal integers less than 256
                    </td>
                    <td>
                        2
                    </td>
                    <td>
                        <code>0F</code> followed by an unsigned 8-bit integer.
                    </td>
                </tr>
                <tr>
                    <td>
                        Other decimal integers
                    </td>
                    <td>
                        3
                    </td>
                    <td>
                        <code>1C</code> followed by a two's complement signed 16-bit little-endian integer.
                        GW-BASIC will recognise a negative number encountered this way but it will not store
                        negative numbers itself using the two's complement, but rather by preceding the positive
                        number with <code>EA</code>.
                    </td>
                </tr>
                <tr>
                    <td>
                        Single precision floating-point number
                    </td>
                    <td>
                        5
                    </td>
                    <td>
                        <code>1D</code> followed by a four-byte single in <a href="#mbf">Microsoft Binary Format</a>.
                    </td>
                </tr>
                <tr>
                    <td>
                        Double precision floating-point number
                    </td>
                    <td>
                        9
                    </td>
                    <td>
                        <code>1F</code> followed by an eight-byte double in <a href="#mbf">Microsoft Binary Format</a>.
                    </td>
                </tr>
            </table>
        </div>
        <h5 id="reserved-words">Keyword tokens</h5>
        <p>
            Most keywords in PC-BASIC are <dfn>reserved words</dfn>. Reserved words are represented
            in a tokenised program by a single- or double-byte token. The complete list is below.
        </p>
        <p>
            All function names and operators are reserved words and all statements start with a reserved word
            (which in the case of <code>LET</code> is optional). However, the converse is not true:
            not all reserved words are statements, functions, or operators.
            For example, <code>TO</code> and <code>SPC(</code> only occur as part of a statement syntax.
            Furthermore, some keywords that form part of statement syntax are not reserved words:
            examples are <code>AS</code>, <code>BASE</code>, and <code>ACCESS</code>.
        </p>
        <p>
            Keywords that are not reserved words are spelt out in full text in the tokenised source.
        </p>
        <p>
            A variable or user-defined function name must not be identical to a reserved word. The list below
            is an exhaustive list of reserved words that can be used to determine whether a
            name is legal.
        </p>
        <ul class="compact10">
            <li><code>81</code> <code>END</code></li>
            <li><code>82</code> <code>FOR</code></li>
            <li><code>83</code> <code>NEXT</code></li>
            <li><code>84</code> <code>DATA</code></li>
            <li><code>85</code> <code>INPUT</code></li>
            <li><code>86</code> <code>DIM</code></li>
            <li><code>87</code> <code>READ</code></li>
            <li><code>88</code> <code>LET</code></li>
            <li><code>89</code> <code>GOTO</code></li>
            <li><code>8A</code> <code>RUN</code></li>
            <li><code>8B</code> <code>IF</code></li>
            <li><code>8C</code> <code>RESTORE</code></li>
            <li><code>8D</code> <code>GOSUB</code></li>
            <li><code>8E</code> <code>RETURN</code></li>
            <li><code>8F</code> <code>REM</code></li>
            <li><code>90</code> <code>STOP</code></li>
            <li><code>91</code> <code>PRINT</code></li>
            <li><code>92</code> <code>CLEAR</code></li>
            <li><code>93</code> <code>LIST</code></li>
            <li><code>94</code> <code>NEW</code></li>
            <li><code>95</code> <code>ON</code></li>
            <li><code>96</code> <code>WAIT</code></li>
            <li><code>97</code> <code>DEF</code></li>
            <li><code>98</code> <code>POKE</code></li>
            <li><code>99</code> <code>CONT</code></li>
            <li><code>9C</code> <code>OUT</code></li>
            <li><code>9D</code> <code>LPRINT</code></li>
            <li><code>9E</code> <code>LLIST</code></li>
            <li><code>A0</code> <code>WIDTH</code></li>
            <li><code>A1</code> <code>ELSE</code></li>
            <li><code>A2</code> <code>TRON</code></li>
            <li><code>A3</code> <code>TROFF</code></li>
            <li><code>A4</code> <code>SWAP</code></li>
            <li><code>A5</code> <code>ERASE</code></li>
            <li><code>A6</code> <code>EDIT</code></li>
            <li><code>A7</code> <code>ERROR</code></li>
            <li><code>A8</code> <code>RESUME</code></li>
            <li><code>A9</code> <code>DELETE</code></li>
            <li><code>AA</code> <code>AUTO</code></li>
            <li><code>AB</code> <code>RENUM</code></li>
            <li><code>AC</code> <code>DEFSTR</code></li>
            <li><code>AD</code> <code>DEFINT</code></li>
            <li><code>AE</code> <code>DEFSNG</code></li>
            <li><code>AF</code> <code>DEFDBL</code></li>
            <li><code>B0</code> <code>LINE</code></li>
            <li><code>B1</code> <code>WHILE</code></li>
            <li><code>B2</code> <code>WEND</code></li>
            <li><code>B3</code> <code>CALL</code></li>
            <li><code>B7</code> <code>WRITE</code></li>
            <li><code>B8</code> <code>OPTION</code></li>
            <li><code>B9</code> <code>RANDOMIZE</code></li>
            <li><code>BA</code> <code>OPEN</code></li>
            <li><code>BB</code> <code>CLOSE</code></li>
            <li><code>BC</code> <code>LOAD</code></li>
            <li><code>BD</code> <code>MERGE</code></li>
            <li><code>BE</code> <code>SAVE</code></li>
            <li><code>BF</code> <code>COLOR</code></li>
            <li><code>C0</code> <code>CLS</code></li>
            <li><code>C1</code> <code>MOTOR</code></li>
            <li><code>C2</code> <code>BSAVE</code></li>
            <li><code>C3</code> <code>BLOAD</code></li>
            <li><code>C4</code> <code>SOUND</code></li>
            <li><code>C5</code> <code>BEEP</code></li>
            <li><code>C6</code> <code>PSET</code></li>
            <li><code>C7</code> <code>PRESET</code></li>
            <li><code>C8</code> <code>SCREEN</code></li>
            <li><code>C9</code> <code>KEY</code></li>
            <li><code>CA</code> <code>LOCATE</code></li>
            <li><code>CC</code> <code>TO</code></li>
            <li><code>CD</code> <code>THEN</code></li>
            <li><code>CE</code> <code>TAB(</code></li>
            <li><code>CF</code> <code>STEP</code></li>
            <li><code>D0</code> <code>USR</code></li>
            <li><code>D1</code> <code>FN</code></li>
            <li><code>D2</code> <code>SPC(</code></li>
            <li><code>D3</code> <code>NOT</code></li>
            <li><code>D4</code> <code>ERL</code></li>
            <li><code>D5</code> <code>ERR</code></li>
            <li><code>D6</code> <code>STRING$</code></li>
            <li><code>D7</code> <code>USING</code></li>
            <li><code>D8</code> <code>INSTR</code></li>
            <li><code>D9</code> <code>'</code></li>
            <li><code>DA</code> <code>VARPTR</code></li>
            <li><code>DB</code> <code>CSRLIN</code></li>
            <li><code>DC</code> <code>POINT</code></li>
            <li><code>DD</code> <code>OFF</code></li>
            <li><code>DE</code> <code>INKEY$</code></li>
            <li><code>E6</code> <code>&gt;</code></li>
            <li><code>E7</code> <code>=</code></li>
            <li><code>E8</code> <code>&lt;</code></li>
            <li><code>E9</code> <code>+</code></li>
            <li><code>EA</code> <code>-</code></li>
            <li><code>EB</code> <code>*</code></li>
            <li><code>EC</code> <code>/</code></li>
            <li><code>ED</code> <code>^</code></li>
            <li><code>EE</code> <code>AND</code></li>
            <li><code>EF</code> <code>OR</code></li>
            <li><code>F0</code> <code>XOR</code></li>
            <li><code>F1</code> <code>EQV</code></li>
            <li><code>F2</code> <code>IMP</code></li>
            <li><code>F3</code> <code>MOD</code></li>
            <li><code>F4</code> <code>\</code></li>
            <li><code>FD81</code> <code>CVI</code></li>
            <li><code>FD82</code> <code>CVS</code></li>
            <li><code>FD83</code> <code>CVD</code></li>
            <li><code>FD84</code> <code>MKI$</code></li>
            <li><code>FD85</code> <code>MKS$</code></li>
            <li><code>FD86</code> <code>MKD$</code></li>
            <li><code>FD8B</code> <code>EXTERR</code></li>
            <li><code>FE81</code> <code>FILES</code></li>
            <li><code>FE82</code> <code>FIELD</code></li>
            <li><code>FE83</code> <code>SYSTEM</code></li>
            <li><code>FE84</code> <code>NAME</code></li>
            <li><code>FE85</code> <code>LSET</code></li>
            <li><code>FE86</code> <code>RSET</code></li>
            <li><code>FE87</code> <code>KILL</code></li>
            <li><code>FE88</code> <code>PUT</code></li>
            <li><code>FE89</code> <code>GET</code></li>
            <li><code>FE8A</code> <code>RESET</code></li>
            <li><code>FE8B</code> <code>COMMON</code></li>
            <li><code>FE8C</code> <code>CHAIN</code></li>
            <li><code>FE8D</code> <code>DATE$</code></li>
            <li><code>FE8E</code> <code>TIME$</code></li>
            <li><code>FE8F</code> <code>PAINT</code></li>
            <li><code>FE90</code> <code>COM</code></li>
            <li><code>FE91</code> <code>CIRCLE</code></li>
            <li><code>FE92</code> <code>DRAW</code></li>
            <li><code>FE93</code> <code>PLAY</code></li>
            <li><code>FE94</code> <code>TIMER</code></li>
            <li><code>FE95</code> <code>ERDEV</code></li>
            <li><code>FE96</code> <code>IOCTL</code></li>
            <li><code>FE97</code> <code>CHDIR</code></li>
            <li><code>FE98</code> <code>MKDIR</code></li>
            <li><code>FE99</code> <code>RMDIR</code></li>
            <li><code>FE9A</code> <code>SHELL</code></li>
            <li><code>FE9B</code> <code>ENVIRON</code></li>
            <li><code>FE9C</code> <code>VIEW</code></li>
            <li><code>FE9D</code> <code>WINDOW</code></li>
            <li><code>FE9E</code> <code>PMAP</code></li>
            <li><code>FE9F</code> <code>PALETTE</code></li>
            <li><code>FEA0</code> <code>LCOPY</code></li>
            <li><code>FEA1</code> <code>CALLS</code></li>
            <li><code>FEA5</code> <code>PCOPY</code></li>
            <li><code>FEA7</code> <code>LOCK</code></li>
            <li><code>FEA8</code> <code>UNLOCK</code></li>
            <li><code>FF81</code> <code>LEFT$</code></li>
            <li><code>FF82</code> <code>RIGHT$</code></li>
            <li><code>FF83</code> <code>MID$</code></li>
            <li><code>FF84</code> <code>SGN</code></li>
            <li><code>FF85</code> <code>INT</code></li>
            <li><code>FF86</code> <code>ABS</code></li>
            <li><code>FF87</code> <code>SQR</code></li>
            <li><code>FF88</code> <code>RND</code></li>
            <li><code>FF89</code> <code>SIN</code></li>
            <li><code>FF8A</code> <code>LOG</code></li>
            <li><code>FF8B</code> <code>EXP</code></li>
            <li><code>FF8C</code> <code>COS</code></li>
            <li><code>FF8D</code> <code>TAN</code></li>
            <li><code>FF8E</code> <code>ATN</code></li>
            <li><code>FF8F</code> <code>FRE</code></li>
            <li><code>FF90</code> <code>INP</code></li>
            <li><code>FF91</code> <code>POS</code></li>
            <li><code>FF92</code> <code>LEN</code></li>
            <li><code>FF93</code> <code>STR$</code></li>
            <li><code>FF94</code> <code>VAL</code></li>
            <li><code>FF95</code> <code>ASC</code></li>
            <li><code>FF96</code> <code>CHR$</code></li>
            <li><code>FF97</code> <code>PEEK</code></li>
            <li><code>FF98</code> <code>SPACE$</code></li>
            <li><code>FF99</code> <code>OCT$</code></li>
            <li><code>FF9B</code> <code>LPOS</code></li>
            <li><code>FF9A</code> <code>HEX$</code></li>
            <li><code>FF9C</code> <code>CINT</code></li>
            <li><code>FF9D</code> <code>CSNG</code></li>
            <li><code>FF9E</code> <code>CDBL</code></li>
            <li><code>FF9F</code> <code>FIX</code></li>
            <li><code>FFA0</code> <code>PEN</code></li>
            <li><code>FFA1</code> <code>STICK</code></li>
            <li><code>FFA2</code> <code>STRIG</code></li>
            <li><code>FFA3</code> <code>EOF</code></li>
            <li><code>FFA4</code> <code>LOC</code></li>
            <li><code>FFA5</code> <code>LOF</code></li>
        </ul>
        <p>
            The following additional reserved words are activated by the option
            <code><a href="#--syntax">syntax</a>={pcjr|tandy}</code>.
        </p>
        <ul class="compact10">
            <li><code>FEA4</code> <code>NOISE</code></li>
            <li><code>FEA6</code> <code>TERM</code></li>
        </ul>
        <h5 id="internal-use-tokens">Internal use tokens</h5>
        <p>
            The tokens <code>10</code>, <code>1E</code> and <code>0D</code> are
            known to be used internally by GW-BASIC. They should not appear in a
            correctly stored tokenised program file.
        </p>
        <h4 id="mbf">Microsoft Binary Format</h3>
        <p>
            Floating point numbers in GW-BASIC and PC-BASIC are represented in <dfn>Microsoft Binary Format
            (MBF)</dfn>, which differs from the IEEE 754 standard used by practically all modern software and hardware.
            Consequently, binary files generated by either BASIC are
            fully compatible with each other and with some applications contemporary to
            GW-BASIC, but not easily interchanged with other software. QBASIC, for example, uses IEEE
            floats.
        </p>
        <p>
            MBF differs from IEEE in the position of the sign bit and in using
            only 8 bits for the exponent, both in single- and in double-precision.
            This makes the range of allowable numbers in an MBF double-precision number smaller,
            but their precision higher, than for an IEEE double:
            an MBF single has 23 bits of precision,
            while an MBF double has 55 bits of precision. Both have the same range.
        </p>
        <p>
            Unlike IEEE, the Microsoft Binary Format does not support signed zeroes, subnormal numbers, infinities or not-a-number values.
        </p>

        <p>
            MBF floating point numbers are represented in bytes as follows:
        </p>
        <dl class="compact">
            <dt>
                Single
            </dt>
            <dd>
                <var>M<sub>3</sub></var>  <var>M<sub>2</sub></var>  <var>M<sub>1</sub></var>  <var>E<sub>0</sub></var>
            </dd>
            <dt>
                Double
            </dt>
            <dd>
                <var>M<sub>7</sub></var>  <var>M<sub>6</sub></var>  <var>M<sub>5</sub></var>  <var>M<sub>4</sub></var>  <var>M<sub>3</sub></var>  <var>M<sub>2</sub></var>  <var>M<sub>1</sub></var>  <var>E<sub>0</sub></var>
            </dd>
        </dl>
        <p>
            Here, <var>E<sub>0</sub></var> is the <dfn>exponent byte</dfn> and the
            other bytes form the <dfn>mantissa</dfn>, in little-endian order so that
            <var>M<sub>1</sub></var> is the most significant byte.
            The most significant bit of <var>M<sub>1</sub></var> is the <dfn>sign bit</dfn>, followed
            by the most significant bits of the mantissa:
            <var>M<sub>1</sub></var> = <var>s<sub>0</sub>  f<sub>1</sub> f<sub>2</sub> f<sub>3</sub> f<sub>4</sub> f<sub>5</sub> f<sub>6</sub> f<sub>7</sub></var>.
            The other bytes contain the less-significant mantissa bits:
            <var>M<sub>2</sub></var> = <var>f<sub>8</sub> f<sub>9</sub> f<sub>A</sub> f<sub>B</sub> f<sub>C</sub> f<sub>D</sub> f<sub>E</sub> f<sub>F</sub></var>, and so on.
        </p>
        <p>
            The value of the floating-point number is <var>v</var> = 0 if <var>E<sub>0</sub></var> = 0 and
            <var>v</var> = (-1) <sup><var>s<sub>0</sub></var></sup> &times; <var>mantissa</var> &times; 2 <sup><var>E<sub>0</sub></var> - 128</sup> otherwise,
            where
            the mantissa is formed as a binary fraction
            <var>mantissa</var> = 0 . 1 <var>f<sub>1</sub></var> <var>f<sub>2</sub></var> <var>f<sub>3</sub></var> ...
        </p>
    </section>
    <hr />

    <section>
        <h3 id="protected-file-format">Protected file format</h3>
        <p>
            The protected format is an encrypted form of the tokenised format.
            GW-BASIC would refuse to show the source code of such files.
            This protection scheme could easily be circumvented by changing a flag in memory.
            Deprotection programs have circulated widely for decades and the decryption
            algorithm and keys were published in a mathematical magazine.
        </p>
        <p>
            A protected program file on a disk device has the following format.
        </p>
        <dl>
            <dt>
                Magic byte
            </dt>
            <dd>
                <code>FE</code>
            </dd>
            <dt>
                Payload
            </dt>
            <dd>
                Encrypted content of a tokenised program file, including its
                end of file marker but excluding its magic byte. The encription cipher
                rotates through an 11-byte and a 13-byte key so that the resulting
                transformation is the same after 143 bytes. For each byte,
                <ul>
                    <li>
                        Subtract the corresponding byte from the 11-byte sequence<br />
                        <code>0B 0A 09 08 07 06 05 04 03 02 01</code>
                    </li>
                    <li>
                        Exclusive-or with the corresponding byte from the 11-byte key<br />
                        <code>1E 1D C4 77 26 97 E0 74 59 88 7C</code>
                    </li>
                    <li>
                        Exclusive-or with the corresponding byte from the 13-byte key<br />
                        <code>A9 84 8D CD 75 83 43 63 24 83 19 F7 9A</code>
                    </li>
                    <li>
                        Add the corresponding byte from the 13-byte sequence<br />
                        <code>0D 0C 0B 0A 09 08 07 06 05 04 03 02 01</code>
                    </li>
                </ul>
            </dd>
            <dt>
                End of file marker
            </dt>
            <dd>
                An <code>1A</code> is written to mark the end of file. This is optional;
                the file will be read without problems if it is omitted. Since the
                end-of-file marker of the tokenised program is included in the encrypted
                content, a protected file is usually one byte longer than its
                unprotected equivalent.
            </dd>
        </dl>
    </section>
    <hr />

    <section>
        <h3 id="bsave-file-format"><code>BSAVE</code> file format</h3>
        <p>
            A memory-dump file on a disk device has the following format.
        </p>
        <dl>
            <dt>
                Magic byte
            </dt>
            <dd>
                <code>FD</code>
            </dd>
            <dt>
                Header
            </dt>
            <dd>
                <div class="scrollable">
                    <table>
                        <tr>
                            <th>
                                Bytes
                            </th>
                            <th>
                                Format
                            </th>
                            <th>
                                Meaning
                            </th>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td>
                                Unsigned 16-bit little-endian integer.
                            </td>
                            <td>
                                Segment of the memory block.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td>
                                Unsigned 16-bit little-endian integer.
                            </td>
                            <td>
                                Offset of the first byte of the memory block.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td>
                                Unsigned 16-bit little-endian integer.
                            </td>
                            <td>
                                Length of the memory block in bytes.
                            </td>
                        </tr>
                    </table>
                </div>
            </dd>
            <dt>
                Payload
            </dt>
            <dd>
                The bytes of the memory block.
            </dd>
            <dt>
                Footer
            </dt>
            <dd>
                On Tandy only, the magic byte and the six bytes of the header are repeated here.
                This is optional;
                the file will be read without problems if it is omitted.
            </dd>
            <dt>
                End of file marker
            </dt>
            <dd>
                An <code>1A</code> is written to mark the end of file. This is optional;
                the file will be read without problems if it is omitted.
            </dd>
        </dl>
    </section>
    <hr />

    <section>
        <h3 id="tape-file-format">Cassette file format</h3>
        <p>
            Files on cassette are stored as frequency-modulated sound. The payload
            format of files on cassette is the same as for files on disk device, but
            the headers are different and the files may be split in chunks.
        </p>
        <h5 id="tape-modulation">Modulation</h5>
        <p>
            A 1-bit is represented by a single 1 ms wave period (1000 Hz).
            A 0-bit is represented by a single 0.5 ms wave period (2000 Hz).
        </p>
        <h5 id="tape-byte">Byte format</h5>
        <p>
            A byte is sent as 8 bits, most significant first. There are no start- or stopbits.
        </p>
        <h5 id="tape-record">Record format</h5>
        <p>
            A file is made up of two or more records. Each record has the following format:
            <div class="scrollable">
                <table>
                    <tr>
                        <th>
                            Length
                        </th>
                        <th>
                            Format
                        </th>
                        <th>
                            Meaning
                        </th>
                    </tr>
                    <tr>
                        <td>
                            256 bytes
                        </td>
                        <td>
                            All <code>FF</code>
                        </td>
                        <td>
                            2048 ms pilot wave at 1000 Hz, used for calibration.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            1 bit
                        </td>
                        <td>
                            <code>0</code>
                        </td>
                        <td>
                            Synchronisation bit.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            1 byte
                        </td>
                        <td>
                            <code>16</code> (<code><i>SYN</i></code>)
                        </td>
                        <td>
                            Synchronisation byte.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            256 bytes
                        </td>
                        <td>
                        </td>
                        <td>
                            Data block.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            2 bytes
                        </td>
                        <td>
                            Unsigned 16-bit <em>big-endian</em> integer
                        </td>
                        <td>
                            CRC-16-CCITT checksum.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            31 bits
                        </td>
                        <td>
                            30 1s followed by a 0.
                        </td>
                        <td>
                            End of record marker.
                        </td>
                    </tr>
                </table>
            </div>
            <p>
                Tokenised, protected and <code>BSAVE</code> files consist of a header record
                followed by a single record which may contain multiple 256-byte data blocks, each followed by the 2 CRC bytes.
                Plain text program files and data files consist of a header record followed by multiple single-block records.
            </p>

            <h5 id="tape-header">Header block format</h5>
            <div class="scrollable">
                <table>
                    <tr>
                        <th>
                            Bytes
                        </th>
                        <th>
                            Format
                        </th>
                        <th>
                            Meaning
                        </th>
                    </tr>
                    <tr>
                        <td>
                            1
                        </td>
                        <td>
                            <code>A5</code>
                        </td>
                        <td>
                            Header record magic byte
                        </td>
                    </tr>
                    <tr>
                        <td>
                            8
                        </td>
                        <td>
                            8 characters
                        </td>
                        <td>
                            Filename.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            1
                        </td>
                        <td>

                        </td>
                        <td>
                            File type. <code>00</code> for data file,
                            <code>01</code> for memory dump,
                            <code>20</code> or <code>A0</code> for protected,
                            <code>40</code> for plain text program,
                            <code>80</code> for tokenised program.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            2
                        </td>
                        <td>
                            Unsigned 16-bit little-endian integer
                        </td>
                        <td>
                            Length of next data record, in bytes.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            2
                        </td>
                        <td>
                            Unsigned 16-bit little-endian integer
                        </td>
                        <td>
                            Segment of memory location.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            2
                        </td>
                        <td>
                            Unsigned 16-bit little-endian integer
                        </td>
                        <td>
                            Offset of memory location.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            1
                        </td>
                        <td>
                            <code>00</code>
                        </td>
                        <td>
                            End of header data
                        </td>
                    </tr>
                    <tr>
                        <td>
                            239
                        </td>
                        <td>
                            All <code>01</code>
                        </td>
                        <td>
                            Filler
                        </td>
                    </tr>
                </table>
            </div>

            <h5 id="block">Data block format</h5>
            <div class="scrollable">
                <table>
                    <tr>
                        <th>
                            Bytes
                        </th>
                        <th>
                            Format
                        </th>
                        <th>
                            Meaning
                        </th>
                    </tr>
                    <tr>
                        <td>
                            1
                        </td>
                        <td>
                            8-bit unsigned integer
                        </td>
                        <td>
                            Number of payload bytes in last record, plus one.
                            If zero, the next record is not the last record.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            255
                        </td>
                        <td>

                        </td>
                        <td>
                            Payload data. If this is the last record, any unused bytes are filled
                            by repeating the last payload byte.
                        </td>
                    </tr>
                </table>
            </div>

        </p>
    </section>
    <hr />

    <section>
        <h3 id="emulator-file-formats">Emulator file formats</h3>
        <p>
            PC-BASIC uses a number of file formats to support its emulation of
            legacy hardware, which are documented in this section.
            These file formats are not used by GW-BASIC or
            contemporary software.
        </p>
        <h4 id="hex-file-format">HEX font file format</h4>
        <p>
            The HEX file format for bitfonts was developed by Roman Czyborra for the
            GNU Unifont package. PC-BASIC uses an extended version of this file format to store its fonts.
        </p>
        <p>
            A HEX file is an ASCII text file, consisting of lines terminated by <code><i>LF</i></code>.
            Each line of this file is one of the following:
        </p>
        <ul>
            <li>
                Empty
            </li>
            <li>
                A comment, starting with a <code>#</code> character.
            </li>
            <li>
                One or more 4 or 6-character hexadecimal Unicode code points, separated by commas,
                followed by a colon,
                followed by a hexadecimal number representing the glyph.
                A 64-hexdigit or longer number represents a fullwidth (16xN) glyph, with
                each row of 16 pixels represented by four hexadecimal digits.
                A shorter number represents a halfwidth (8xN) glyph, with
                each row of 8 pixels represented by two hexadecimal digits.
            </li>
        </ul>
        <h4 id="ucp-file-format">UCP code page file format</h4>
        <p>
            Unicode-codepage mappings are stored in UCP files.
        </p>
        <p>
            A UCP file is an ASCII text file, consisting of lines terminated by <code><i>LF</i></code>.
            Each line of this file is one of the following:
        </p>
        <ul>
            <li>
                Empty
            </li>
            <li>
                A comment, starting with a <code>#</code> character.
            </li>
            <li>
                A 2- or 4-character hexadecimal codepage point, followed by a colon, followed
                by a comma-separated list of 4- or 6-character hexadecimal Unicode code points.
                If more than one Unicode code point is provided for a codepage point, the code points
                combine into a single glyph.
            </li>
        </ul>
        <h4 id="cas-file-format">CAS tape file format</h4>
        <p>
            A CAS file is a bit-level representation of cassette data introduced by the PCE emulator.
            CAS-files produced by PC-BASIC start with the characters
            <code>PC-BASIC tape<i>EOF</i></code>. This sequence is followed by seven 0 bits,
            followed by the tape contents. The seven zero bits are intended to
            ensure that the tape contents are byte-aligned; the one bit is made up
            by the synchronisation bit following the pilot wave.
        </p>
        <p>
            Note that PC-BASIC does not require the introductory sequence to read
            a CAS-file correctly, nor does it require the contents of a CAS-file
            to be byte-aligned. However, new files produced by PC-BASIC follow
            this convention.
        </p>
    </section>
    <hr />

    <section>
        <h3 id="character-codes">Character codes</h3>
        <p>
            Depending on context, PC-BASIC will treat a code point in
            the control characters range as a control character or as a
            glyph defined by the active <a href="#codepages">codepage</a> which by
            default is <a href="#cp437">codepage 437</a>. Code points of
            <code>&amp;h80</code> or higher are always interpreted as a
            codepage glyph.
        </p>

        <h4 id="ascii">ASCII</h4>
        <p>
            This is a list of the American Standard Code for Information Interchange (ASCII).
            ASCII only covers 128 characters and defines the code point ranges
            <code>&amp;h00</code>&ndash;<code>&amp;h1F</code> and <code>&amp;h7F</code>
            as <dfn>control characters</dfn> which do not have a printable glyph assigned
            to them. This includes such values as the <i>Carriage Return</i> (<code><i>CR</i></code>)
            character that ends a program line.
        </p>
        <p>
            In the context of this documentation, character <code>&amp;h1A</code> (<code><i>SUB</i></code>)
            will usually be indicated as <code><i>EOF</i></code> since it plays the role of end-of-file marker in DOS.
        </p>
        <div class="scrollable">
            <table>
                <tr>
                    <td>&nbsp;</td>
                    <th><code>_0</code></th>
                    <th><code>_1</code></th>
                    <th><code>_2</code></th>
                    <th><code>_3</code></th>
                    <th><code>_4</code></th>
                    <th><code>_5</code></th>
                    <th><code>_6</code></th>
                    <th><code>_7</code></th>
                    <th><code>_8</code></th>
                    <th><code>_9</code></th>
                    <th><code>_A</code></th>
                    <th><code>_B</code></th>
                    <th><code>_C</code></th>
                    <th><code>_D</code></th>
                    <th><code>_E</code></th>
                    <th><code>_F</code></th>
                </tr>
                <tr>
                    <th><code>0_</code></th>
                    <td><code><i>NUL</i></code></td>
                    <td><code><i>SOH</i></code></td>
                    <td><code><i>STX</i></code></td>
                    <td><code><i>ETX</i></code></td>
                    <td><code><i>EOT</i></code></td>
                    <td><code><i>ENQ</i></code></td>
                    <td><code><i>ACK</i></code></td>
                    <td><code><i>BEL</i></code></td>
                    <td><code><i>BS&nbsp;</i></code></td>
                    <td><code><i>HT&nbsp;</i></code></td>
                    <td><code><i>LF&nbsp;</i></code></td>
                    <td><code><i>VT&nbsp;</i></code></td>
                    <td><code><i>FF&nbsp;</i></code></td>
                    <td><code><i>CR&nbsp;</i></code></td>
                    <td><code><i>SO&nbsp;</i></code></td>
                    <td><code><i>SI&nbsp;</i></code></td>
                </tr>
                <tr>
                    <th><code>1_</code></th>
                    <td><code><i>DLE</i></code></td>
                    <td><code><i>DC1</i></code></td>
                    <td><code><i>DC2</i></code></td>
                    <td><code><i>DC3</i></code></td>
                    <td><code><i>DC4</i></code></td>
                    <td><code><i>NAK</i></code></td>
                    <td><code><i>SYN</i></code></td>
                    <td><code><i>ETB</i></code></td>
                    <td><code><i>CAN</i></code></td>
                    <td><code><i>EM&nbsp;</i></code></td>
                    <td><code><i>SUB</i></code></td>
                    <td><code><i>ESC</i></code></td>
                    <td><code><i>FS&nbsp;</i></code></td>
                    <td><code><i>GS&nbsp;</i></code></td>
                    <td><code><i>RS&nbsp;</i></code></td>
                    <td><code><i>US&nbsp;</i></code></td>
                </tr>
                <tr>
                    <th><code>2_</code></th>
                    <td><code>&#x0020;</code></td>
                    <td><code>&#x0021;</code></td>
                    <td><code>&#x0022;</code></td>
                    <td><code>&#x0023;</code></td>
                    <td><code>&#x0024;</code></td>
                    <td><code>&#x0025;</code></td>
                    <td><code>&#x0026;</code></td>
                    <td><code>&#x0027;</code></td>
                    <td><code>&#x0028;</code></td>
                    <td><code>&#x0029;</code></td>
                    <td><code>&#x002a;</code></td>
                    <td><code>&#x002b;</code></td>
                    <td><code>&#x002c;</code></td>
                    <td><code>&#x002d;</code></td>
                    <td><code>&#x002e;</code></td>
                    <td><code>&#x002f;</code></td>
                </tr>
                <tr>
                    <th><code>3_</code></th>
                    <td><code>&#x0030;</code></td>
                    <td><code>&#x0031;</code></td>
                    <td><code>&#x0032;</code></td>
                    <td><code>&#x0033;</code></td>
                    <td><code>&#x0034;</code></td>
                    <td><code>&#x0035;</code></td>
                    <td><code>&#x0036;</code></td>
                    <td><code>&#x0037;</code></td>
                    <td><code>&#x0038;</code></td>
                    <td><code>&#x0039;</code></td>
                    <td><code>&#x003a;</code></td>
                    <td><code>&#x003b;</code></td>
                    <td><code>&#x003c;</code></td>
                    <td><code>&#x003d;</code></td>
                    <td><code>&#x003e;</code></td>
                    <td><code>&#x003f;</code></td>
                </tr>
                <tr>
                    <th><code>4_</code></th>
                    <td><code>&#x0040;</code></td>
                    <td><code>&#x0041;</code></td>
                    <td><code>&#x0042;</code></td>
                    <td><code>&#x0043;</code></td>
                    <td><code>&#x0044;</code></td>
                    <td><code>&#x0045;</code></td>
                    <td><code>&#x0046;</code></td>
                    <td><code>&#x0047;</code></td>
                    <td><code>&#x0048;</code></td>
                    <td><code>&#x0049;</code></td>
                    <td><code>&#x004a;</code></td>
                    <td><code>&#x004b;</code></td>
                    <td><code>&#x004c;</code></td>
                    <td><code>&#x004d;</code></td>
                    <td><code>&#x004e;</code></td>
                    <td><code>&#x004f;</code></td>
                </tr>
                <tr>
                    <th><code>5_</code></th>
                    <td><code>&#x0050;</code></td>
                    <td><code>&#x0051;</code></td>
                    <td><code>&#x0052;</code></td>
                    <td><code>&#x0053;</code></td>
                    <td><code>&#x0054;</code></td>
                    <td><code>&#x0055;</code></td>
                    <td><code>&#x0056;</code></td>
                    <td><code>&#x0057;</code></td>
                    <td><code>&#x0058;</code></td>
                    <td><code>&#x0059;</code></td>
                    <td><code>&#x005a;</code></td>
                    <td><code>&#x005b;</code></td>
                    <td><code>&#x005c;</code></td>
                    <td><code>&#x005d;</code></td>
                    <td><code>&#x005e;</code></td>
                    <td><code>&#x005f;</code></td>
                </tr>
                <tr>
                    <th><code>6_</code></th>
                    <td><code>&#x0060;</code></td>
                    <td><code>&#x0061;</code></td>
                    <td><code>&#x0062;</code></td>
                    <td><code>&#x0063;</code></td>
                    <td><code>&#x0064;</code></td>
                    <td><code>&#x0065;</code></td>
                    <td><code>&#x0066;</code></td>
                    <td><code>&#x0067;</code></td>
                    <td><code>&#x0068;</code></td>
                    <td><code>&#x0069;</code></td>
                    <td><code>&#x006a;</code></td>
                    <td><code>&#x006b;</code></td>
                    <td><code>&#x006c;</code></td>
                    <td><code>&#x006d;</code></td>
                    <td><code>&#x006e;</code></td>
                    <td><code>&#x006f;</code></td>
                </tr>
                <tr>
                    <th><code>7_</code></th>
                    <td><code>&#x0070;</code></td>
                    <td><code>&#x0071;</code></td>
                    <td><code>&#x0072;</code></td>
                    <td><code>&#x0073;</code></td>
                    <td><code>&#x0074;</code></td>
                    <td><code>&#x0075;</code></td>
                    <td><code>&#x0076;</code></td>
                    <td><code>&#x0077;</code></td>
                    <td><code>&#x0078;</code></td>
                    <td><code>&#x0079;</code></td>
                    <td><code>&#x007a;</code></td>
                    <td><code>&#x007b;</code></td>
                    <td><code>&#x007c;</code></td>
                    <td><code>&#x007d;</code></td>
                    <td><code>&#x007e;</code></td>
                    <td><code><i>DEL</i></code></td>
                </tr>
            </table>
        </div>

        <h4 id="cp437">Codepage 437</h4>
        <p>
            This table shows the characters that
            are produced by the 256 single-byte code points when
            the DOS Latin USA codepage 437 is loaded, which is the default.
            Other codepages can be loaded to assign other characters to these
            code points.
        </p>
        <ul>
            <li>
                Code point <code>&amp;h00</code> cannot be redefined.
            </li>
            <li>
                Redefining characters
                in the printable ASCII code point range <code>&amp;h20</code>&ndash;<code>&amp;h7E</code>
                will result in a different glyph being shown on the screen, but the
                character will continue to be treated as the corresponding ASCII character.
                It will retain its ASCII value when transcoded into UTF-8. This happens,
                for example, with the Yen sign (<code>&#xa5;</code>) which is
                assigned to ASCII code point <code>&amp;h5C</code> in code page 932:
                in that codepage it is treated as if it were a backslash (<code>\</code>).
            </li>
            <li>
                All other characters can be redefined by loading another <a href="#codepage">codepage</a>
                with the <a href="#--codepage">codepage</a> option.
                This will affect both the visual glyphs and Unicode
                character values of those characters.
            </li>
        </ul>
        <div class="scrollable">
            <table>
                <tr>
                    <td>&nbsp;</td>
                    <th><code>_0</code></th>
                    <th><code>_1</code></th>
                    <th><code>_2</code></th>
                    <th><code>_3</code></th>
                    <th><code>_4</code></th>
                    <th><code>_5</code></th>
                    <th><code>_6</code></th>
                    <th><code>_7</code></th>
                    <th><code>_8</code></th>
                    <th><code>_9</code></th>
                    <th><code>_A</code></th>
                    <th><code>_B</code></th>
                    <th><code>_C</code></th>
                    <th><code>_D</code></th>
                    <th><code>_E</code></th>
                    <th><code>_F</code></th>
                </tr>
                <tr>
                    <th><code>0_</code></th>
                    <td><code>&#x0000;</code></td>
                    <td><code>&#x263A;</code></td>
                    <td><code>&#x263B;</code></td>
                    <td><code>&#x2665;</code></td>
                    <td><code>&#x2666;</code></td>
                    <td><code>&#x2663;</code></td>
                    <td><code>&#x2660;</code></td>
                    <td><code>&#x2022;</code></td>
                    <td><code>&#x25d8;</code></td>
                    <td><code>&#x25cb;</code></td>
                    <td><code>&#x25d9;</code></td>
                    <td><code>&#x2642;</code></td>
                    <td><code>&#x2640;</code></td>
                    <td><code>&#x266a;</code></td>
                    <td><code>&#x266b;</code></td>
                    <td><code>&#x263c;</code></td>
                </tr>
                <tr>
                    <th><code>1_</code></th>
                    <td><code>&#x25ba;</code></td>
                    <td><code>&#x25c4;</code></td>
                    <td><code>&#x2195;</code></td>
                    <td><code>&#x203c;</code></td>
                    <td><code>&#x00b6;</code></td>
                    <td><code>&#x00a7;</code></td>
                    <td><code>&#x25ac;</code></td>
                    <td><code>&#x21a8;</code></td>
                    <td><code>&#x2191;</code></td>
                    <td><code>&#x2193;</code></td>
                    <td><code>&#x2192;</code></td>
                    <td><code>&#x2190;</code></td>
                    <td><code>&#x221f;</code></td>
                    <td><code>&#x2194;</code></td>
                    <td><code>&#x25b2;</code></td>
                    <td><code>&#x25bc;</code></td>
                </tr>
                <tr>
                    <th><code>2_</code></th>
                    <td><code>&#x0020;</code></td>
                    <td><code>&#x0021;</code></td>
                    <td><code>&#x0022;</code></td>
                    <td><code>&#x0023;</code></td>
                    <td><code>&#x0024;</code></td>
                    <td><code>&#x0025;</code></td>
                    <td><code>&#x0026;</code></td>
                    <td><code>&#x0027;</code></td>
                    <td><code>&#x0028;</code></td>
                    <td><code>&#x0029;</code></td>
                    <td><code>&#x002a;</code></td>
                    <td><code>&#x002b;</code></td>
                    <td><code>&#x002c;</code></td>
                    <td><code>&#x002d;</code></td>
                    <td><code>&#x002e;</code></td>
                    <td><code>&#x002f;</code></td>
                </tr>
                <tr>
                    <th><code>3_</code></th>
                    <td><code>&#x0030;</code></td>
                    <td><code>&#x0031;</code></td>
                    <td><code>&#x0032;</code></td>
                    <td><code>&#x0033;</code></td>
                    <td><code>&#x0034;</code></td>
                    <td><code>&#x0035;</code></td>
                    <td><code>&#x0036;</code></td>
                    <td><code>&#x0037;</code></td>
                    <td><code>&#x0038;</code></td>
                    <td><code>&#x0039;</code></td>
                    <td><code>&#x003a;</code></td>
                    <td><code>&#x003b;</code></td>
                    <td><code>&#x003c;</code></td>
                    <td><code>&#x003d;</code></td>
                    <td><code>&#x003e;</code></td>
                    <td><code>&#x003f;</code></td>
                </tr>
                <tr>
                    <th><code>4_</code></th>
                    <td><code>&#x0040;</code></td>
                    <td><code>&#x0041;</code></td>
                    <td><code>&#x0042;</code></td>
                    <td><code>&#x0043;</code></td>
                    <td><code>&#x0044;</code></td>
                    <td><code>&#x0045;</code></td>
                    <td><code>&#x0046;</code></td>
                    <td><code>&#x0047;</code></td>
                    <td><code>&#x0048;</code></td>
                    <td><code>&#x0049;</code></td>
                    <td><code>&#x004a;</code></td>
                    <td><code>&#x004b;</code></td>
                    <td><code>&#x004c;</code></td>
                    <td><code>&#x004d;</code></td>
                    <td><code>&#x004e;</code></td>
                    <td><code>&#x004f;</code></td>
                </tr>
                <tr>
                    <th><code>5_</code></th>
                    <td><code>&#x0050;</code></td>
                    <td><code>&#x0051;</code></td>
                    <td><code>&#x0052;</code></td>
                    <td><code>&#x0053;</code></td>
                    <td><code>&#x0054;</code></td>
                    <td><code>&#x0055;</code></td>
                    <td><code>&#x0056;</code></td>
                    <td><code>&#x0057;</code></td>
                    <td><code>&#x0058;</code></td>
                    <td><code>&#x0059;</code></td>
                    <td><code>&#x005a;</code></td>
                    <td><code>&#x005b;</code></td>
                    <td><code>&#x005c;</code></td>
                    <td><code>&#x005d;</code></td>
                    <td><code>&#x005e;</code></td>
                    <td><code>&#x005f;</code></td>
                </tr>
                <tr>
                    <th><code>6_</code></th>
                    <td><code>&#x0060;</code></td>
                    <td><code>&#x0061;</code></td>
                    <td><code>&#x0062;</code></td>
                    <td><code>&#x0063;</code></td>
                    <td><code>&#x0064;</code></td>
                    <td><code>&#x0065;</code></td>
                    <td><code>&#x0066;</code></td>
                    <td><code>&#x0067;</code></td>
                    <td><code>&#x0068;</code></td>
                    <td><code>&#x0069;</code></td>
                    <td><code>&#x006a;</code></td>
                    <td><code>&#x006b;</code></td>
                    <td><code>&#x006c;</code></td>
                    <td><code>&#x006d;</code></td>
                    <td><code>&#x006e;</code></td>
                    <td><code>&#x006f;</code></td>
                </tr>
                <tr>
                    <th><code>7_</code></th>
                    <td><code>&#x0070;</code></td>
                    <td><code>&#x0071;</code></td>
                    <td><code>&#x0072;</code></td>
                    <td><code>&#x0073;</code></td>
                    <td><code>&#x0074;</code></td>
                    <td><code>&#x0075;</code></td>
                    <td><code>&#x0076;</code></td>
                    <td><code>&#x0077;</code></td>
                    <td><code>&#x0078;</code></td>
                    <td><code>&#x0079;</code></td>
                    <td><code>&#x007a;</code></td>
                    <td><code>&#x007b;</code></td>
                    <td><code>&#x007c;</code></td>
                    <td><code>&#x007d;</code></td>
                    <td><code>&#x007e;</code></td>
                    <td><code>&#x2302;</code></td>
                </tr>
                <tr>
                    <th><code>8_</code></th>
                    <td><code>&#x00c7;</code></td>
                    <td><code>&#x00fc;</code></td>
                    <td><code>&#x00e9;</code></td>
                    <td><code>&#x00e2;</code></td>
                    <td><code>&#x00e4;</code></td>
                    <td><code>&#x00e0;</code></td>
                    <td><code>&#x00e5;</code></td>
                    <td><code>&#x00e7;</code></td>
                    <td><code>&#x00ea;</code></td>
                    <td><code>&#x00eb;</code></td>
                    <td><code>&#x00e8;</code></td>
                    <td><code>&#x00ef;</code></td>
                    <td><code>&#x00ee;</code></td>
                    <td><code>&#x00ec;</code></td>
                    <td><code>&#x00c4;</code></td>
                    <td><code>&#x00c5;</code></td>
                </tr>
                <tr>
                    <th><code>9_</code></th>
                    <td><code>&#x00c9;</code></td>
                    <td><code>&#x00e6;</code></td>
                    <td><code>&#x00c6;</code></td>
                    <td><code>&#x00f4;</code></td>
                    <td><code>&#x00f6;</code></td>
                    <td><code>&#x00f2;</code></td>
                    <td><code>&#x00fb;</code></td>
                    <td><code>&#x00f9;</code></td>
                    <td><code>&#x00ff;</code></td>
                    <td><code>&#x00d6;</code></td>
                    <td><code>&#x00dc;</code></td>
                    <td><code>&#x00a2;</code></td>
                    <td><code>&#x00a3;</code></td>
                    <td><code>&#x00a5;</code></td>
                    <td><code>&#x20a7;</code></td>
                    <td><code>&#x0192;</code></td>
                </tr>
                <tr>
                    <th><code>A_</code></th>
                    <td><code>&#x00e1;</code></td>
                    <td><code>&#x00ed;</code></td>
                    <td><code>&#x00f3;</code></td>
                    <td><code>&#x00fa;</code></td>
                    <td><code>&#x00f1;</code></td>
                    <td><code>&#x00d1;</code></td>
                    <td><code>&#x00aa;</code></td>
                    <td><code>&#x00ba;</code></td>
                    <td><code>&#x00bf;</code></td>
                    <td><code>&#x2310;</code></td>
                    <td><code>&#x00ac;</code></td>
                    <td><code>&#x00bd;</code></td>
                    <td><code>&#x00bc;</code></td>
                    <td><code>&#x00a1;</code></td>
                    <td><code>&#x00ab;</code></td>
                    <td><code>&#x00bb;</code></td>
                </tr>
                <tr>
                    <th><code>B_</code></th>
                    <td><code>&#x2591;</code></td>
                    <td><code>&#x2592;</code></td>
                    <td><code>&#x2593;</code></td>
                    <td><code>&#x2502;</code></td>
                    <td><code>&#x2524;</code></td>
                    <td><code>&#x2561;</code></td>
                    <td><code>&#x2562;</code></td>
                    <td><code>&#x2556;</code></td>
                    <td><code>&#x2555;</code></td>
                    <td><code>&#x2563;</code></td>
                    <td><code>&#x2551;</code></td>
                    <td><code>&#x2557;</code></td>
                    <td><code>&#x255d;</code></td>
                    <td><code>&#x255c;</code></td>
                    <td><code>&#x255b;</code></td>
                    <td><code>&#x2510;</code></td>
                </tr>
                <tr>
                    <th><code>C_</code></th>
                    <td><code>&#x2514;</code></td>
                    <td><code>&#x2534;</code></td>
                    <td><code>&#x252c;</code></td>
                    <td><code>&#x251c;</code></td>
                    <td><code>&#x2500;</code></td>
                    <td><code>&#x253c;</code></td>
                    <td><code>&#x255e;</code></td>
                    <td><code>&#x255f;</code></td>
                    <td><code>&#x255a;</code></td>
                    <td><code>&#x2554;</code></td>
                    <td><code>&#x2569;</code></td>
                    <td><code>&#x2566;</code></td>
                    <td><code>&#x2560;</code></td>
                    <td><code>&#x2550;</code></td>
                    <td><code>&#x256c;</code></td>
                    <td><code>&#x2567;</code></td>
                </tr>
                <tr>
                    <th><code>D_</code></th>
                    <td><code>&#x2568;</code></td>
                    <td><code>&#x2564;</code></td>
                    <td><code>&#x2565;</code></td>
                    <td><code>&#x2559;</code></td>
                    <td><code>&#x2558;</code></td>
                    <td><code>&#x2552;</code></td>
                    <td><code>&#x2553;</code></td>
                    <td><code>&#x256b;</code></td>
                    <td><code>&#x256a;</code></td>
                    <td><code>&#x2518;</code></td>
                    <td><code>&#x250c;</code></td>
                    <td><code>&#x2588;</code></td>
                    <td><code>&#x2584;</code></td>
                    <td><code>&#x258c;</code></td>
                    <td><code>&#x2590;</code></td>
                    <td><code>&#x2580;</code></td>
                </tr>
                <tr>
                    <th><code>E_</code></th>
                    <td><code>&#x03b1;</code></td>
                    <td><code>&#x00df;</code></td>
                    <td><code>&#x0393;</code></td>
                    <td><code>&#x03c0;</code></td>
                    <td><code>&#x03a3;</code></td>
                    <td><code>&#x03c3;</code></td>
                    <td><code>&#x00b5;</code></td>
                    <td><code>&#x03c4;</code></td>
                    <td><code>&#x03a6;</code></td>
                    <td><code>&#x0398;</code></td>
                    <td><code>&#x03a9;</code></td>
                    <td><code>&#x03b4;</code></td>
                    <td><code>&#x221e;</code></td>
                    <td><code>&#x03c6;</code></td>
                    <td><code>&#x03b5;</code></td>
                    <td><code>&#x2229;</code></td>
                </tr>
                <tr>
                    <th><code>F_</code></th>
                    <td><code>&#x2261;</code></td>
                    <td><code>&#x00b1;</code></td>
                    <td><code>&#x2265;</code></td>
                    <td><code>&#x2264;</code></td>
                    <td><code>&#x2320;</code></td>
                    <td><code>&#x2321;</code></td>
                    <td><code>&#x00f7;</code></td>
                    <td><code>&#x2248;</code></td>
                    <td><code>&#x00b0;</code></td>
                    <td><code>&#x2219;</code></td>
                    <td><code>&#x00b7;</code></td>
                    <td><code>&#x221a;</code></td>
                    <td><code>&#x207f;</code></td>
                    <td><code>&#x00b2;</code></td>
                    <td><code>&#x25a0;</code></td>
                    <td><code>&#x00a0;</code></td>
                </tr>
            </table>
        </div>
    </section>
    <hr />

    <section>
        <h3 id="keycodes">Keycodes</h3>
        <h4 id="scancodes">Scancodes</h3>
        <p>
            PC-BASIC uses PC/XT scancodes, which originated on the 83-key IBM Model F keyboard
            supplied with the IBM PC 5150. The layout of this keyboard was quite distinct
            from modern standard keyboards with 101 or more keys, but keys on a modern keyboard produce
            the same scancode as the key with the same function on the Model F. For example,
            the key that (on a US keyboard) produces the <kbd>\</kbd> was located next to
            the left <kbd>Shift</kbd> key on the Model F keyboard and has scancode
            <code>&amp;h2B</code>. The (US) backslash key still has this scancode, even
            though it is now usually found above the <kbd>Enter</kbd> key.
        </p>
        <p>
            To further complicate matters, keyboards for different locales have their layout remapped in software
            rather than in hardware, which means that they produce the same scancode as
            the key that on a US keyboard is in the same location, regardless of which character they actually produce.
        </p>
        <p>
            Therefore, the <kbd>A</kbd> on
            a French keyboard will produce the same scancode as the <kbd>Q</kbd> on a UK or US keyboard.
            The aforementioned US <kbd>\</kbd> key is identified with the key that is generally found
            to the bottom left of <kbd>Enter</kbd> on non-US keyboards. For example, on my UK keyboard
            this is the <kbd>#</kbd> key. Non-US keyboards have an additional key next
            to the left <kbd>Shift</kbd> which on the UK keyboard is the <kbd>\</kbd>. Therefore,
            while this key is in the same location and has the same function as the Model F <kbd>\</kbd>,
            it has a different scancode.
        </p>
        <p>
            In the table below, the keys are marked by their function on a US keyboard,
            but it should be kept in mind that the scancode is linked to the position,
            not the function, of the key.
        </p>
        <div class="scrollable">
            <table>
                <tr>
                    <th>Key</th>
                    <th>Scancode</th>
                </tr>
                <tr>
                    <td><kbd>Esc</kbd></td>
                    <td>01</td>
                </tr>
                <tr>
                    <td><kbd>1 !</kbd></td>
                    <td>02</td>
                </tr>
                <tr>
                    <td><kbd>2 @</kbd></td>
                    <td>03</td>
                </tr>
                <tr>
                    <td><kbd>3 #</kbd></td>
                    <td>04</td>
                </tr>
                <tr>
                    <td><kbd>4 $</kbd></td>
                    <td>05</td>
                </tr>
                <tr>
                    <td><kbd>5 %</kbd></td>
                    <td>06</td>
                </tr>
                <tr>
                    <td><kbd>6 ^</kbd></td>
                    <td>07</td>
                </tr>
                <tr>
                    <td><kbd>7 &amp;</kbd></td>
                    <td>08</td>
                </tr>
                <tr>
                    <td><kbd>8 *</kbd></td>
                    <td>09</td>
                </tr>
                <tr>
                    <td><kbd>9 (</kbd></td>
                    <td>0A</td>
                </tr>
                <tr>
                    <td><kbd>0 )</kbd></td>
                    <td>0B</td>
                </tr>
                <tr>
                    <td><kbd>- _</kbd></td>
                    <td>0C</td>
                </tr>
                <tr>
                    <td><kbd>= +</kbd></td>
                    <td>0D</td>
                </tr>
                <tr>
                    <td><kbd>Backspace</kbd></td>
                    <td>0E</td>
                </tr>
                <tr>
                    <td><kbd>Tab</kbd></td>
                    <td>0F</td>
                </tr>
                <tr>
                    <td><kbd>q Q</kbd></td>
                    <td>10</td>
                </tr>
                <tr>
                    <td><kbd>w W</kbd></td>
                    <td>11</td>
                </tr>
                <tr>
                    <td><kbd>e E</kbd></td>
                    <td>12</td>
                </tr>
                <tr>
                    <td><kbd>r R</kbd></td>
                    <td>13</td>
                </tr>
                <tr>
                    <td><kbd>t T</kbd></td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><kbd>y Y</kbd></td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><kbd>u U</kbd></td>
                    <td>16</td>
                </tr>
                <tr>
                    <td><kbd>i I</kbd></td>
                    <td>17</td>
                </tr>
                <tr>
                    <td><kbd>o O</kbd></td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><kbd>p P</kbd></td>
                    <td>19</td>
                </tr>
                <tr>
                    <td><kbd>[ {</kbd></td>
                    <td>1A</td>
                </tr>
                <tr>
                    <td><kbd>] }</kbd></td>
                    <td>1B</td>
                </tr>
                <tr>
                    <td><kbd>Enter</kbd></td>
                    <td>1C</td>
                </tr>
                <tr>
                    <td><kbd>Ctrl</kbd></td>
                    <td>1D</td>
                </tr>
                <tr>
                    <td><kbd>a A</kbd></td>
                    <td>1E</td>
                </tr>
                <tr>
                    <td><kbd>s S</kbd></td>
                    <td>1F</td>
                </tr>
                <tr>
                    <td><kbd>d D</kbd></td>
                    <td>20</td>
                </tr>
                <tr>
                    <td><kbd>f F</kbd></td>
                    <td>21</td>
                </tr>
                <tr>
                    <td><kbd>g G</kbd></td>
                    <td>22</td>
                </tr>
                <tr>
                    <td><kbd>h H</kbd></td>
                    <td>23</td>
                </tr>
                <tr>
                    <td><kbd>j J</kbd></td>
                    <td>24</td>
                </tr>
                <tr>
                    <td><kbd>k K</kbd></td>
                    <td>25</td>
                </tr>
                <tr>
                    <td><kbd>l L</kbd></td>
                    <td>26</td>
                </tr>
                <tr>
                    <td><kbd>; :</kbd></td>
                    <td>27</td>
                </tr>
                <tr>
                    <td><kbd>' "</kbd></td>
                    <td>28</td>
                </tr>
                <tr>
                    <td><kbd>` ~</kbd></td>
                    <td>29</td>
                </tr>
                <tr>
                    <td><kbd>Left Shift</kbd></td>
                    <td>2A</td>
                </tr>
                <tr>
                    <td><kbd>\ |</kbd></td>
                    <td>2B</td>
                </tr>
                <tr>
                    <td><kbd>z Z</kbd></td>
                    <td>2C</td>
                </tr>
                <tr>
                    <td><kbd>x X</kbd></td>
                    <td>2D</td>
                </tr>
                <tr>
                    <td><kbd>c C</kbd></td>
                    <td>2E</td>
                </tr>
                <tr>
                    <td><kbd>v V</kbd></td>
                    <td>2F</td>
                </tr>
                <tr>
                    <td><kbd>b B</kbd></td>
                    <td>  30</td>
                </tr>
                <tr>
                    <td><kbd>n N</kbd></td>
                    <td>31</td>
                </tr>
                <tr>
                    <td><kbd>m M</kbd></td>
                    <td>32</td>
                </tr>
                <tr>
                    <td><kbd>, &lt;</kbd></td>
                    <td>33</td>
                </tr>
                <tr>
                    <td><kbd>. &gt;</kbd></td>
                    <td>34</td>
                </tr>
                <tr>
                    <td><kbd>/ ?</kbd></td>
                    <td>35</td>
                </tr>
                <tr>
                    <td><kbd>Right Shift</kbd></td>
                    <td>36</td>
                </tr>
                <tr>
                    <td><kbd>keypad *</kbd> <kbd>PrtSc</kbd></td>
                    <td>37</td>
                </tr>
                <tr>
                    <td><kbd>Alt</kbd></td>
                    <td>38</td>
                </tr>
                <tr>
                    <td><kbd>Space</kbd></td>
                    <td>39</td>
                </tr>
                <tr>
                    <td><kbd>Caps Lock</kbd></td>
                    <td>3A</td>
                </tr>
                <tr>
                    <td><kbd>F1</kbd></td>
                    <td>3B</td>
                </tr>
                <tr>
                    <td><kbd>F2</kbd></td>
                    <td>3C</td>
                </tr>
                <tr>
                    <td><kbd>F3</kbd></td>
                    <td>3D</td>
                </tr>
                <tr>
                    <td><kbd>F4</kbd></td>
                    <td>3E</td>
                </tr>
                <tr>
                    <td><kbd>F5</kbd></td>
                    <td>3F</td>
                </tr>
                <tr>
                    <td><kbd>F6</kbd></td>
                    <td>40</td>
                </tr>
                <tr>
                    <td><kbd>F7</kbd></td>
                    <td>41</td>
                </tr>
                <tr>
                    <td><kbd>F8</kbd></td>
                    <td>42</td>
                </tr>
                <tr>
                    <td><kbd>F9</kbd></td>
                    <td>43</td>
                </tr>
                <tr>
                    <td><kbd>F10</kbd></td>
                    <td>44</td>
                </tr>
                <tr>
                    <td><kbd>Num Lock</kbd></td>
                    <td>45</td>
                </tr>
                <tr>
                    <td><kbd>Scroll Lock</kbd> <kbd>Pause</kbd></td>
                    <td>46</td>
                </tr>
                <tr>
                    <td><kbd>keypad 7</kbd> <kbd>Home</kbd></td>
                    <td>47</td>
                </tr>
                <tr>
                    <td><kbd>keypad 8</kbd> <kbd>&#8593;<!--up--></kbd></td>
                    <td>48</td>
                </tr>
                <tr>
                    <td><kbd>keypad 9</kbd> <kbd>Pg Up</kbd></td>
                    <td>49</td>
                </tr>
                <tr>
                    <td><kbd>keypad -</kbd></td>
                    <td>4A</td>
                </tr>
                <tr>
                    <td><kbd>keypad 4</kbd> <kbd>&#8592;<!--left--></kbd></td>
                    <td>4B</td>
                </tr>
                <tr>
                    <td><kbd>keypad 5</kbd></td>
                    <td>4C</td>
                </tr>
                <tr>
                    <td><kbd>keypad 6</kbd> <kbd>&#8594;<!--right--></kbd></td>
                    <td>4D</td>
                </tr>
                <tr>
                    <td><kbd>keypad +</kbd></td>
                    <td>4E</td>
                </tr>
                <tr>
                    <td><kbd>keypad 1</kbd> <kbd>End</kbd></td>
                    <td>4F</td>
                </tr>
                <tr>
                    <td><kbd>keypad 2</kbd> <kbd>&#8595;<!--down--></kbd></td>
                    <td>50</td>
                </tr>
                <tr>
                    <td><kbd>keypad 3</kbd> <kbd>Pg Dn</kbd></td>
                    <td>51</td>
                </tr>
                <tr>
                    <td><kbd>keypad 0</kbd> <kbd>Ins</kbd></td>
                    <td>52</td>
                </tr>
                <tr>
                    <td><kbd>keypad .</kbd> <kbd>Del</kbd></td>
                    <td>53</td>
                </tr>
                <tr>
                    <td><kbd>SysReq</kbd></td>
                    <td>54</td>
                </tr>
                <tr>
                    <td><kbd>\ |</kbd> (Non-US 102-key) </td>
                    <td>56</td>
                </tr>
                <tr>
                    <td><kbd>F11</kbd></td>
                    <td>57</td>
                </tr>
                <tr>
                    <td><kbd>F12</kbd></td>
                    <td>58</td>
                </tr>
                <tr>
                    <td><kbd>Left Logo</kbd> (Windows 104-key)</td>
                    <td>5B</td>
                </tr>
                <tr>
                    <td><kbd>Right Logo</kbd> (Windows 104-key)</td>
                    <td>5C</td>
                </tr>
                <tr>
                    <td><kbd>Menu</kbd> (Windows 104-key)</td>
                    <td>5D</td>
                </tr>
                <tr>
                    <td><kbd>ひらがな/カタカナ Hiragana/Katakana</kbd> (Japanese 106-key)</td>
                    <td>70</td>
                </tr>
                <tr>
                    <td><kbd>\ _</kbd>  (Japanese 106-key)</td>
                    <td>73</td>
                </tr>
                <tr>
                    <td><kbd>変換 Henkan</kbd>  (Japanese 106-key)</td>
                    <td>79</td>
                </tr>
                <tr>
                    <td><kbd>無変換 Muhenkan</kbd>  (Japanese 106-key)</td>
                    <td>7B</td>
                </tr>
                <tr>
                    <td><kbd>半角/全角 Hankaku/Zenkaku</kbd>  (Japanese 106-key)</td>
                    <td>29</td>
                </tr>
                <tr>
                    <td><kbd>¥ |</kbd>  (Japanese 106-key)</td>
                    <td>7D</td>
                </tr>
                <tr>
                    <td><kbd>한자 Hanja</kbd>  (Korean 103-key)</td>
                    <td>F1</td>
                </tr>
                <tr>
                    <td><kbd>한/영 Han/Yeong</kbd>  (Korean 103-key)</td>
                    <td>F2</td>
                </tr>
                <tr>
                    <td><kbd>\ ? °</kbd>  (Brazilian ABNT2)</td>
                    <td>73</td>
                </tr>
                <tr>
                    <td><kbd>keypad .</kbd>  (Brazilian ABNT2)</td>
                    <td>7E</td>
                </tr>
            </table>
        </div>

        <h4 id="eascii">e-ASCII codes</h4>
        <p>
            Alongside <a href="#scancodes">scancodes</a>, most keys also carry
            a character value the GW-BASIC documentation calls <dfn>extended ASCII</dfn>.
            Since this is a rather overloaded term, we shall use the abbreviation
            <dfn>e-ASCII</dfn> exclusively for these values.
            The values returned by the
            <a href="#INKEY$"><code>INKEY$</code></a> function are e-ASCII values.
        </p>
            <p> e-ASCII codes are one or
            two bytes long; single-byte codes are simply ASCII codes whereas
            double-byte codes consist of a <code><i>NUL</i></code> character plus
            a code indicating the key pressed. Some, but certainly not all,
            of these codes agree with the keys' scancodes.
        </p>
        <p>
            Unlike scancodes, e-ASCII codes of unmodified keys and those
            of keys modified by <kbd>Shift</kbd>, <kbd>Ctrl</kbd> or <kbd>Alt</kbd>
            are all different.
        </p>
        <p>
            Unmodified, <kbd>Shift</kbd>ed and <kbd>Ctrl</kbd>ed e-ASCII codes are
            connected to a key's meaning, not its location. For example, the e-ASCII
            for <kbd>Ctrl</kbd>+<kbd>a</kbd> are the same on a
            French and a US keyboard.
            By contrast, the <kbd>Alt</kbd>ed codes are connected
            to the key's location, like scancodes.
            The US keyboard layout is used in the table below.
        </p>

        <div class="scrollable">
            <table>
                <tr>
                    <th>Key</th>
                    <th>e-ASCII</th>
                    <th>e-ASCII <kbd>Shift</kbd></th>
                    <th>e-ASCII <kbd>Ctrl</kbd></th>
                    <th>e-ASCII <kbd>Alt</kbd></th>
                </tr>
                <tr>
                    <td><kbd>Esc</kbd></td>
                    <td><code>1B</code></td>
                    <td><code>1B</code></td>
                    <td><code>1B</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>1 !</kbd></td>
                    <td><code>31</code></td>
                    <td><code>21</code></td>
                    <td></td>
                    <td><code>00 78</code></td>
                </tr>
                <tr>
                    <td><kbd>2 @</kbd></td>
                    <td><code>32</code></td>
                    <td><code>40</code></td>
                    <td><code>00 03</code></td>
                    <td><code>00 79</code></td>
                </tr>
                <tr>
                    <td><kbd>3 #</kbd></td>
                    <td><code>33</code></td>
                    <td><code>23</code></td>
                    <td></td>
                    <td><code>00 7A</code></td>
                </tr>
                <tr>
                    <td><kbd>4 $</kbd></td>
                    <td><code>34</code></td>
                    <td><code>24</code></td>
                    <td></td>
                    <td><code>00 7B</code></td>
                </tr>
                <tr>
                    <td><kbd>5 %</kbd></td>
                    <td><code>35</code></td>
                    <td><code>25</code></td>
                    <td></td>
                    <td><code>00 7C</code></td>
                </tr>
                <tr>
                    <td><kbd>6 ^</kbd></td>
                    <td><code>36</code></td>
                    <td><code>5E</code></td>
                    <td><code>1E</code></td>
                    <td><code>00 7D</code></td>
                </tr>
                <tr>
                    <td><kbd>7 &amp;</kbd></td>
                    <td><code>37</code></td>
                    <td><code>26</code></td>
                    <td></td>
                    <td><code>00 7E</code></td>
                </tr>
                <tr>
                    <td><kbd>8 *</kbd></td>
                    <td><code>38</code></td>
                    <td><code>2A</code></td>
                    <td></td>
                    <td><code>00 7F</code></td>
                </tr>
                <tr>
                    <td><kbd>9 (</kbd></td>
                    <td><code>39</code></td>
                    <td><code>28</code></td>
                    <td></td>
                    <td><code>00 80</code></td>
                </tr>
                <tr>
                    <td><kbd>0 )</kbd></td>
                    <td><code>30</code></td>
                    <td><code>29</code></td>
                    <td></td>
                    <td><code>00 81</code></td>
                </tr>
                <tr>
                    <td><kbd>- _</kbd></td>
                    <td><code>2D</code></td>
                    <td><code>5F</code></td>
                    <td><code>1F</code></td>
                    <td><code>00 82</code></td>
                </tr>
                <tr>
                    <td><kbd>= +</kbd></td>
                    <td><code>3D</code></td>
                    <td><code>2B</code></td>
                    <td></td>
                    <td><code>00 83</code></td>
                </tr>
                <tr>
                    <td><kbd>Backspace</kbd></td>
                    <td><code>08</code></td>
                    <td><code>08</code></td>
                    <td><code>7F</code></td>
                    <td><code>00 8C</code></td>
                </tr>
                <tr>
                    <td><kbd>Tab</kbd></td>
                    <td><code>09</code></td>
                    <td><code>00 0F</code></td>
                    <td><code>00 8D</code></td>
                    <td><code>00 8E</code></td>
                </tr>
                <tr>
                    <td><kbd>q Q</kbd></td>
                    <td><code>71</code></td>
                    <td><code>51</code></td>
                    <td><code>11</code></td>
                    <td><code>00 10</code></td>
                </tr>
                <tr>
                    <td><kbd>w W</kbd></td>
                    <td><code>77</code></td>
                    <td><code>57</code></td>
                    <td><code>17</code></td>
                    <td><code>00 11</code></td>
                </tr>
                <tr>
                    <td><kbd>e E</kbd></td>
                    <td><code>65</code></td>
                    <td><code>45</code></td>
                    <td><code>05</code></td>
                    <td><code>00 12</code></td>
                </tr>
                <tr>
                    <td><kbd>r R</kbd></td>
                    <td><code>72</code></td>
                    <td><code>52</code></td>
                    <td><code>12</code></td>
                    <td><code>00 13</code></td>
                </tr>
                <tr>
                    <td><kbd>t T</kbd></td>
                    <td><code>74</code></td>
                    <td><code>54</code></td>
                    <td><code>14</code></td>
                    <td><code>00 14</code></td>
                </tr>
                <tr>
                    <td><kbd>y Y</kbd></td>
                    <td><code>79</code></td>
                    <td><code>59</code></td>
                    <td><code>19</code></td>
                    <td><code>00 15</code></td>
                </tr>
                <tr>
                    <td><kbd>u U</kbd></td>
                    <td><code>75</code></td>
                    <td><code>55</code></td>
                    <td><code>15</code></td>
                    <td><code>00 16</code></td>
                </tr>
                <tr>
                    <td><kbd>i I</kbd></td>
                    <td><code>69</code></td>
                    <td><code>49</code></td>
                    <td><code>09</code></td>
                    <td><code>00 17</code></td>
                </tr>
                <tr>
                    <td><kbd>o O</kbd></td>
                    <td><code>6F</code></td>
                    <td><code>4F</code></td>
                    <td><code>0F</code></td>
                    <td><code>00 18</code></td>
                </tr>
                <tr>
                    <td><kbd>p P</kbd></td>
                    <td><code>70</code></td>
                    <td><code>50</code></td>
                    <td><code>10</code></td>
                    <td><code>00 19</code></td>
                </tr>
                <tr>
                    <td><kbd>[ {</kbd></td>
                    <td><code>5B</code></td>
                    <td><code>7B</code></td>
                    <td><code>1B</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>] }</kbd></td>
                    <td><code>5D</code></td>
                    <td><code>7D</code></td>
                    <td><code>1D</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>Enter</kbd></td>
                    <td><code>0D</code></td>
                    <td><code>0D</code></td>
                    <td><code>0A</code></td>
                    <td><code>00 8F</code></td>
                </tr>
                <tr>
                    <td><kbd>a A</kbd></td>
                    <td><code>61</code></td>
                    <td><code>41</code></td>
                    <td><code>01</code></td>
                    <td><code>00 1E</code></td>
                </tr>
                <tr>
                    <td><kbd>s S</kbd></td>
                    <td><code>73</code></td>
                    <td><code>53</code></td>
                    <td><code>13</code></td>
                    <td><code>00 1F</code></td>
                </tr>
                <tr>
                    <td><kbd>d D</kbd></td>
                    <td><code>64</code></td>
                    <td><code>44</code></td>
                    <td><code>04</code></td>
                    <td><code>00 20</code></td>
                </tr>
                <tr>
                    <td><kbd>f F</kbd></td>
                    <td><code>66</code></td>
                    <td><code>46</code></td>
                    <td><code>06</code></td>
                    <td><code>00 21</code></td>
                </tr>
                <tr>
                    <td><kbd>g G</kbd></td>
                    <td><code>67</code></td>
                    <td><code>47</code></td>
                    <td><code>07</code></td>
                    <td><code>00 22</code></td>
                </tr>
                <tr>
                    <td><kbd>h H</kbd></td>
                    <td><code>68</code></td>
                    <td><code>48</code></td>
                    <td><code>08</code></td>
                    <td><code>00 23</code></td>
                </tr>
                <tr>
                    <td><kbd>j J</kbd></td>
                    <td><code>6A</code></td>
                    <td><code>4A</code></td>
                    <td><code>0A</code></td>
                    <td><code>00 24</code></td>
                </tr>
                <tr>
                    <td><kbd>k K</kbd></td>
                    <td><code>6B</code></td>
                    <td><code>4B</code></td>
                    <td><code>0B</code></td>
                    <td><code>00 25</code></td>
                </tr>
                <tr>
                    <td><kbd>l L</kbd></td>
                    <td><code>6C</code></td>
                    <td><code>4C</code></td>
                    <td><code>0C</code></td>
                    <td><code>00 26</code></td>
                </tr>
                <tr>
                    <td><kbd>; :</kbd></td>
                    <td><code>3B</code></td>
                    <td><code>3A</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>' "</kbd></td>
                    <td><code>27</code></td>
                    <td><code>22</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>` ~</kbd></td>
                    <td><code>60</code></td>
                    <td><code>7E</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>\ |</kbd></td>
                    <td><code>5C</code></td>
                    <td><code>7C</code></td>
                    <td><code>1C</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>z Z</kbd></td>
                    <td><code>7A</code></td>
                    <td><code>5A</code></td>
                    <td><code>1A</code></td>
                    <td><code>00 2C</code></td>
                </tr>
                <tr>
                    <td><kbd>x X</kbd></td>
                    <td><code>78</code></td>
                    <td><code>58</code></td>
                    <td><code>18</code></td>
                    <td><code>00 2d</code></td>
                </tr>
                <tr>
                    <td><kbd>c C</kbd></td>
                    <td><code>63</code></td>
                    <td><code>43</code></td>
                    <td><code>03</code></td>
                    <td><code>00 2E</code></td>
                </tr>
                <tr>
                    <td><kbd>v V</kbd></td>
                    <td><code>76</code></td>
                    <td><code>56</code></td>
                    <td><code>16</code></td>
                    <td><code>00 2F</code></td>
                </tr>
                <tr>
                    <td><kbd>b B</kbd></td>
                    <td><code>62</code></td>
                    <td><code>42</code></td>
                    <td><code>02</code></td>
                    <td><code>00 30</code></td>
                </tr>
                <tr>
                    <td><kbd>n N</kbd></td>
                    <td><code>6E</code></td>
                    <td><code>4E</code></td>
                    <td><code>0E</code></td>
                    <td><code>00 31</code></td>
                </tr>
                <tr>
                    <td><kbd>m M</kbd></td>
                    <td><code>6D</code></td>
                    <td><code>4D</code></td>
                    <td><code>0D</code></td>
                    <td><code>00 32</code></td>
                </tr>
                <tr>
                    <td><kbd>, &lt;</kbd></td>
                    <td><code>2C</code></td>
                    <td><code>3C</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>. &gt;</kbd></td>
                    <td><code>2E</code></td>
                    <td><code>3E</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>/ ?</kbd></td>
                    <td><code>2F</code></td>
                    <td><code>3F</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>PrtSc</kbd></td>
                    <td></td>
                    <td></td>
                    <td><code>00 72</code></td>
                    <td><code>00 46</code></td>
                </tr>
                <tr>
                    <td><kbd>Space</kbd></td>
                    <td><code>20</code></td>
                    <td><code>20</code></td>
                    <td><code>20</code></td>
                    <td><code>00 20</code></td>
                </tr>
                <tr>
                    <td><kbd>F1</kbd></td>
                    <td><code>00 3B</code></td>
                    <td><code>00 54</code></td>
                    <td><code>00 5E</code></td>
                    <td><code>00 68</code></td>
                </tr>
                <tr>
                    <td><kbd>F2</kbd></td>
                    <td><code>00 3C</code></td>
                    <td><code>00 55</code></td>
                    <td><code>00 5F</code></td>
                    <td><code>00 69</code></td>
                </tr>
                <tr>
                    <td><kbd>F3</kbd></td>
                    <td><code>00 3D</code></td>
                    <td><code>00 56</code></td>
                    <td><code>00 60</code></td>
                    <td><code>00 6A</code></td>
                </tr>
                <tr>
                    <td><kbd>F4</kbd></td>
                    <td><code>00 3E</code></td>
                    <td><code>00 57</code></td>
                    <td><code>00 61</code></td>
                    <td><code>00 6C</code></td>
                </tr>
                <tr>
                    <td><kbd>F5</kbd></td>
                    <td><code>00 3F</code></td>
                    <td><code>00 58</code></td>
                    <td><code>00 62</code></td>
                    <td><code>00 6D</code></td>
                </tr>
                <tr>
                    <td><kbd>F6</kbd></td>
                    <td><code>00 40</code></td>
                    <td><code>00 59</code></td>
                    <td><code>00 63</code></td>
                    <td><code>00 6E</code></td>
                </tr>
                <tr>
                    <td><kbd>F7</kbd></td>
                    <td><code>00 41</code></td>
                    <td><code>00 5A</code></td>
                    <td><code>00 64</code></td>
                    <td><code>00 6F</code></td>
                </tr>
                <tr>
                    <td><kbd>F8</kbd></td>
                    <td><code>00 42</code></td>
                    <td><code>00 5B</code></td>
                    <td><code>00 65</code></td>
                    <td><code>00 70</code></td>
                </tr>
                <tr>
                    <td><kbd>F9</kbd></td>
                    <td><code>00 43</code></td>
                    <td><code>00 5C</code></td>
                    <td><code>00 66</code></td>
                    <td><code>00 71</code></td>
                </tr>
                <tr>
                    <td><kbd>F10</kbd></td>
                    <td><code>00 44</code></td>
                    <td><code>00 5D</code></td>
                    <td><code>00 67</code></td>
                    <td><code>00 72</code></td>
                </tr>
                <tr>
                    <td><kbd>F11</kbd> (Tandy)</td>
                    <td><code>00 98</code></td>
                    <td><code>00 A2</code></td>
                    <td><code>00 AC</code></td>
                    <td><code>00 B6</code></td>
                </tr>
                <tr>
                    <td><kbd>F12</kbd> (Tandy)</td>
                    <td><code>00 99</code></td>
                    <td><code>00 A3</code></td>
                    <td><code>00 AD</code></td>
                    <td><code>00 B7</code></td>
                </tr>
                <tr>
                    <td><kbd>Home</kbd></td>
                    <td><code>00 47</code></td>
                    <td><code>00 47</code></td>
                    <td><code>00 77</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>End</kbd></td>
                    <td><code>00 4F</code></td>
                    <td><code>00 4F</code></td>
                    <td><code>00 75</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>PgUp</kbd></td>
                    <td><code>00 49</code></td>
                    <td><code>00 49</code></td>
                    <td><code>00 84</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>PgDn</kbd></td>
                    <td><code>00 51</code></td>
                    <td><code>00 51</code></td>
                    <td><code>00 76</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>&#8593;<!--up--></kbd></td>
                    <td><code>00 48</code></td>
                    <td><code>00 48</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>&#8592;<!--left--></kbd></td>
                    <td><code>00 4B</code></td>
                    <td><code>00 87</code></td>
                    <td><code>00 73</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>&#8594;<!--right--></kbd></td>
                    <td><code>00 4D</code></td>
                    <td><code>00 88</code></td>
                    <td><code>00 74</code></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>&#8595;<!--down--></kbd></td>
                    <td><code>00 50</code></td>
                    <td><code>00 50</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>keypad 5</kbd></td>
                    <td><code>35</code></td>
                    <td><code>35</code></td>
                    <td></td>
                    <td><code>05</code></td>
                </tr>
                <tr>
                    <td><kbd>Ins</kbd></td>
                    <td><code>00 52</code></td>
                    <td><code>00 52</code></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><kbd>Del</kbd></td>
                    <td><code>00 53</code></td>
                    <td><code>00 53</code></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </div>
    </section>
    <hr />

    <section>
        <h3 id="memory">Memory model</h3>
        <p>
            PC-BASIC (rather imperfectly) emulates the memory of real-mode MS-DOS.
            This means that memory can be addressed in <em>segments</em> of 64 KiB.
            Each memory address is given by the segment value and the <code>0--65535</code> byte offset with respect to that segment.
            Note that segments overlap: the actual memory address is found by <code><var>segment</var>*16 + <var>offset</var></code>.
            The maximum memory size that can be addressed by this scheme is thus 1 MiB, which was the size of the <em>conventional</em> and <em>upper</em>
            memory in real-mode MS-DOS.
        </p>
        <h4 id="memory-overview">Overview</h4>
        <p>
            Areas of memory with a special importance are:
        </p>
        <table>
            <tr>
                <th>
                    Segment
                </th>
                <th>
                    Name
                </th>
                <th>
                    Purpose
                </th>
            </tr>
            <tr>
                <td>
                    <code>&amp;h0000</code>
                </td>
                <td>
                    Low memory
                </td>
                <td>
                    Holds machine information, among other things
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;h13AD</code> (may vary)
                </td>
                <td>
                    Data segment
                </td>
                <td>
                    Program code, variables, arrays, strings
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;hA000</code> (EGA) <br />
                    <code>&amp;hB000</code> (MDA) <br />
                    <code>&amp;hB800</code> (CGA) <br />
                </td>
                <td>
                    Video segment
                </td>
                <td>
                    Text and graphics on visible and virtual screens
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;hC000</code>
                </td>
                <td>
                    --
                </td>
                <td>
                    RAM font definition, among other things
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;hF000</code>
                </td>
                <td>
                    Read-only memory
                </td>
                <td>
                    ROM font definition, among other things
                </td>
            </tr>
        </table>

        <h4 id="memory-data">Data segment</h4>
        <p>
            The data segment is organised as follows. The addresses may vary depending on
            the settings of various options; given here are the default values for GW-BASIC 3.23.
        </p>
        <table>
            <tr>
                <th>
                    Offset
                </th>
                <th>
                    Size (bytes)
                </th>
                <th>
                    Function
                </th>
            </tr>
            <tr>
                <td>
                    <code>&amp;h0000</code>
                </td>
                <td>
                    <code>3429</code>
                </td>
                <td>
                    Interpreter workarea. Unused in PC-BASIC; can be adjusted with
                    the <code><a href="#--reserved-memory">--reserved-memory</a></code> option.
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;h0D65</code>
                </td>
                <td>
                    <code>(<var>max-files</var>+1) * 322</code>
                </td>
                <td>
                    File blocks: one for the program plus one for each file allowed by <code><a href="#--max-files">--max-files</a><code>.
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;h126D</code>
                </td>
                <td>
                    <code>3 + <var>c</var></code>
                </td>
                <td>
                    Program code. An empty program uses 3 bytes.
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;h1270 + <var>c</var></code>
                </td>
                <td>
                    <code><var>v</var></code>
                </td>
                <td>
                    Scalar variables.
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;h1270 + <var>c</var> + <var>v</var></code>
                </td>
                <td>
                    <code><var>a</var></code>
                </td>
                <td>
                    Array variables.
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;hFDFC - <var>s</var></code>
                </td>
                <td>
                    <code><var>a</var></code>
                </td>
                <td>
                    String variables, filled downward from <code>&amp;hFDFC</code>
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;hFDFC</code>
                </td>
                <td>
                    <code>512</code>
                </td>
                <td>
                    BASIC stack, size set by <code><a href="#CLEAR">CLEAR</a></code> statement.
                </td>
            </tr>
            <tr>
                <td>
                    <code>&amp;hFFFE</code>
                </td>
                <td>
                </td>
                <td>
                    Top of data segment, set by <code><a href="#CLEAR">CLEAR</a></code> statement.
                </td>
            </tr>
        </table>

    </section>
    <hr />

</article>
